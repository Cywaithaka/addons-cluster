<?xml version="1.0"?>
<openerp>
  <data>
        <!--Activities-->
        <record model="workflow.activity" id="act_select_cashier">
            <field name="wkf_id" ref="point_of_sale.wkf_pos_session"/>
            <field name="name">select_cashier</field>
            <field name="action">wkf_action_select_cashier()</field>
            <field name="kind">function</field>
        </record>
        <record model="workflow.activity" id="act_validate_cashier">
            <field name="wkf_id" ref="point_of_sale.wkf_pos_session"/>
            <field name="name">validate_cashier</field>
            <field name="action">wkf_action_validate_cashier()</field>
            <field name="kind">function</field>
        </record>
        
        <!-- Transitions -->
        <record model="workflow.transition" id="trans_start_to_select_cashier">
            <field name="act_from" ref="point_of_sale.act_start" />
            <field name="act_to" ref="act_select_cashier" />
            <field name="signal" eval="False" />
            <field name="condition">True</field>
        </record>
        
         <record model="workflow.transition" id="point_of_sale.trans_start_to_opening_control">
            <field name="act_from" ref="act_select_cashier" />
            <field name="act_to" ref="point_of_sale.act_opening_control" />
            <field name="signal" eval="False" /> <!-- >start_to_opening_control</field> -->
            <field name="condition">cash_control == True and cashier_selected()</field>
        </record>

        <record model="workflow.transition" id="point_of_sale.trans_start_to_open">
            <field name="act_from" ref="act_select_cashier" />
            <field name="act_to" ref="point_of_sale.act_open" />
            <field name="signal" eval="False" />
            <field name="condition">cash_control == False and cashier_selected()</field>
        </record>
        
        <record model="workflow.transition" id="point_of_sale.trans_closing_control_to_close">
          <field name="act_from" ref="point_of_sale.act_closing_control" />
          <field name="act_to" ref="act_validate_cashier" />
          <field name="signal">close</field>
        </record>

        <record model="workflow.transition" id="point_of_sale.trans_closing_control_to_close_no_control">
          <field name="act_from" ref="point_of_sale.act_closing_control" />
          <field name="act_to" ref="act_validate_cashier" />
          <field name="condition">cash_control == False</field>
        </record>
        
        <record model="workflow.transition" id="point_of_sale.trans_validate_cashier_to_close">
          <field name="act_from" ref="act_validate_cashier" />
          <field name="act_to" ref="point_of_sale.act_close" />
          <field name="signal">close</field>
        </record>

        <record model="workflow.transition" id="point_of_sale.trans_validate_cashier_to_close_no_control">
          <field name="act_from" ref="act_validate_cashier" />
          <field name="act_to" ref="point_of_sale.act_close" />
          <field name="condition">cash_control == False</field>
        </record>
        
        
  </data>
</openerp>

